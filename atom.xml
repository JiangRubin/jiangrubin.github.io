<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://nwc7cp.coding-pages.com</id>
    <title>Rubin&apos;s Blog</title>
    <updated>2020-04-29T02:06:33.588Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://nwc7cp.coding-pages.com"/>
    <link rel="self" href="https://nwc7cp.coding-pages.com/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://nwc7cp.coding-pages.com/images/avatar.png</logo>
    <icon>https://nwc7cp.coding-pages.com/favicon.ico</icon>
    <rights>All rights reserved 2020, Rubin&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[iOS è¯ä¹¦é…ç½®æŒ‡åŒ—]]></title>
        <id>https://nwc7cp.coding-pages.com/post/ios-zheng-shu-pei-zhi-zhi-bei/</id>
        <link href="https://nwc7cp.coding-pages.com/post/ios-zheng-shu-pei-zhi-zhi-bei/">
        </link>
        <updated>2020-04-06T02:16:52.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç”¨ react-native å¼€å‘é¡¹ç›®æ—¶ï¼Œåœ¨å¯¹ iOS è¯ä¹¦ç›¸å…³çš„é…ç½®ï¼Œæ¯æ¬¡æ“ä½œä¸€éåè¿‡ä¸€æ®µæ—¶é—´åˆå¿˜äº†ã€‚æ‰€ä»¥å°†è¯ä¹¦çš„é…ç½®æµç¨‹éƒ½è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚</p>
<h2 id="åˆ›å»ºåº”ç”¨ç¨‹åº-id">åˆ›å»ºåº”ç”¨ç¨‹åº ID</h2>
<p>é¦–å…ˆéœ€è¦å¼€å‘è€…è´¦å·ï¼Œç™»å½•<a href="https://developer.apple.com/" target="_blank">è‹¹æœå¼€å‘è€…ç½‘ç«™</a>è¿›å…¥å¼€å‘è€…è´¦æˆ·ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1586741039119.png" alt="" loading="lazy"></figure>
<p>è¿›å…¥ <code>Certificates, Identifiers &amp; Profiles</code> é¡µé¢ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://nwc7cp.coding-pages.com/post-images/1586141548388.png" alt="" loading="lazy"></figure>
<p>é€‰æ‹© Identifiers åˆ›å»º App IDï¼Œå¡«å†™ App ID çš„ Description å’Œ Bundle IDã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://nwc7cp.coding-pages.com/post-images/1586141828211.png" alt="" loading="lazy"></figure>
<p>ä¸€èˆ¬é€‰æ‹© App IDs å³å¯ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://nwc7cp.coding-pages.com/post-images/1586141936519.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://nwc7cp.coding-pages.com/post-images/1586142154922.png" alt="" loading="lazy"></figure>
<p>ä¸º App æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚æ¶ˆæ¯æ¨é€åŠŸèƒ½ã€‚</p>
<figure data-type="image" tabindex="6"><img src="https://nwc7cp.coding-pages.com/post-images/1586142360020.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="7"><img src="https://nwc7cp.coding-pages.com/post-images/1586142366600.png" alt="" loading="lazy"></figure>
<p>å¡«å†™å¥½ä»¥ä¸Šä¿¡æ¯åï¼Œç‚¹å‡» Continueï¼Œç¡®è®¤ AppId æ­£ç¡®å¡«å†™ï¼Œç‚¹å‡» Registerï¼Œæ³¨å†Œ AppId æˆåŠŸã€‚</p>
<h2 id="åˆ›å»º-csr-æ–‡ä»¶è¯ä¹¦è¯·æ±‚æ–‡ä»¶">åˆ›å»º CSR æ–‡ä»¶ï¼ˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼‰</h2>
<blockquote>
<p>CSRï¼ˆCertificate Signing Requestï¼‰å³è¯ä¹¦è¯·æ±‚æ–‡ä»¶ã€‚è¯ä¹¦ç”³è¯·è€…åœ¨ç”³è¯·æ•°å­—è¯ä¹¦æ—¶ç”± CSPï¼ˆåŠ å¯†æœåŠ¡æä¾›è€…ï¼‰åœ¨ç”Ÿæˆç§é’¥çš„åŒæ—¶ä¹Ÿç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼ˆCSR æ–‡ä»¶ï¼‰ï¼Œè¯ä¹¦ç”³è¯·è€…åªè¦æŠŠ CSR æ–‡ä»¶æäº¤ç»™è¯ä¹¦é¢å‘æœºæ„åï¼ˆåˆ›å»º App ID æ—¶ä¸Šä¼ åˆ°è‹¹æœåå°ï¼‰ï¼Œè¯ä¹¦é¢å‘æœºæ„ä½¿ç”¨å…¶æ ¹è¯ä¹¦ç§é’¥ç­¾åç”Ÿæˆè¯ä¹¦å…¬é’¥æ–‡ä»¶ï¼ˆå¼€å‘è€…è¯ä¹¦ï¼‰ã€‚</p>
</blockquote>
<p>CSR æ–‡ä»¶åœ¨åˆ›å»º Certificates æ—¶éœ€è¦ä¸Šä¼ ã€‚</p>
<p>ä½¿ç”¨ Mac è‡ªå¸¦çš„ <code>é’¥åŒ™ä¸²è®¿é—®</code> æ¥åˆ›å»º <code>Certificate Signing Request</code> æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ“ä½œï¼š</p>
<figure data-type="image" tabindex="8"><img src="https://nwc7cp.coding-pages.com/post-images/1586143369160.png" alt="" loading="lazy"></figure>
<p>å¡«å†™ <code>ç”¨æˆ·é‚®ç®±</code> å’Œ <code>å¸¸ç”¨åç§°</code> (åç§°å¯ä»¥éšæ„å¡«)ï¼Œå¹¶é€‰æ‹© <code>å­˜å‚¨åˆ°ç£ç›˜</code>ï¼Œæ–‡ä»¶åç¼€ä¸º <code>.certSigningRequest</code>ã€‚</p>
<figure data-type="image" tabindex="9"><img src="https://nwc7cp.coding-pages.com/post-images/1586143624913.png" alt="" loading="lazy"></figure>
<h2 id="åˆ›å»ºè¯ä¹¦">åˆ›å»ºè¯ä¹¦</h2>
<blockquote>
<p>iOS è¯ä¹¦æ˜¯ç”¨æ¥è¯æ˜ iOS App å†…å®¹ï¼ˆexecutable codeï¼‰çš„åˆæ³•æ€§å’Œå®Œæ•´æ€§çš„æ•°å­—è¯ä¹¦ã€‚å¯¹äºæƒ³å®‰è£…åˆ°çœŸæœºæˆ–å‘å¸ƒåˆ° AppStore çš„åº”ç”¨ç¨‹åºï¼ˆAppï¼‰ï¼Œåªæœ‰ç»è¿‡ç­¾åéªŒè¯ï¼ˆSignature Validatedï¼‰æ‰èƒ½ç¡®ä¿æ¥æºå¯ä¿¡ï¼Œå¹¶ä¸”ä¿è¯ App å†…å®¹æ˜¯å®Œæ•´ã€æœªç»ç¯¡æ”¹çš„ã€‚</p>
</blockquote>
<p>é€‰æ‹© Certificates ç‚¹å‡»åŠ å·ã€‚</p>
<figure data-type="image" tabindex="10"><img src="https://nwc7cp.coding-pages.com/post-images/1586144322541.png" alt="" loading="lazy"></figure>
<p>é€‰æ‹©ç›¸åº”çš„è¯ä¹¦ç§ç±»ï¼Œå¦‚å›¾æœ‰å¼€å‘è°ƒè¯•è¯ä¹¦ã€ç”Ÿäº§å‘å¸ƒè¯ä¹¦ï¼ˆApp Store ä¸Šä¼ åº”ç”¨å•†åº—ã€Ad Hoc ç”¨äºæµ‹è¯•åŒ…å‘å¸ƒï¼‰ã€å¼€å‘ç¯å¢ƒæ¨é€è¯ä¹¦ã€ç”Ÿäº§ç¯å¢ƒæ¨é€è¯ä¹¦ã€‚é€‰æ‹©ä½ éœ€è¦çš„è¯ä¹¦ã€‚</p>
<figure data-type="image" tabindex="11"><img src="https://nwc7cp.coding-pages.com/post-images/1586236889292.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="12"><img src="https://nwc7cp.coding-pages.com/post-images/1586236895832.png" alt="" loading="lazy"></figure>
<p>å†ç‚¹å‡» Continueï¼Œé€‰æ‹©ä¹‹å‰ç”Ÿæˆçš„ CSR æ–‡ä»¶ä¸Šä¼ ï¼Œç»§ç»­ç‚¹å‡» Continueï¼Œè¯ä¹¦åˆ›å»ºå®Œæˆã€‚ä¸‹è½½ä¸‹æ¥æ·»åŠ åˆ°é’¥åŒ™ä¸²è®¿é—®ä¸­ã€‚</p>
<figure data-type="image" tabindex="13"><img src="https://nwc7cp.coding-pages.com/post-images/1586229786987.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="14"><img src="https://nwc7cp.coding-pages.com/post-images/1586229914720.png" alt="" loading="lazy"></figure>
<h3 id="æ¨é€è¯ä¹¦å’Œæå…‰æ¨é€">æ¨é€è¯ä¹¦å’Œæå…‰æ¨é€</h3>
<p>é¡¹ç›®ä¸­éœ€è¦æ¶ˆæ¯æ¨é€æœåŠ¡çš„è¯ï¼Œå°±éœ€è¦ç”¨çš„æ¶ˆæ¯æ¨é€è¯ä¹¦ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯æå…‰æ¨é€ï¼ŒæŠŠæ¶ˆæ¯æ¨é€è¯ä¹¦ Download ä¸‹æ¥ï¼ŒåŒå‡»æ·»åŠ åˆ°é’¥åŒ™ä¸²è®¿é—®ä¸­ã€‚æ‰¾åˆ°åˆšæ‰ä¸‹è½½çš„è¯ä¹¦å¹¶å¯¼å‡º <code>.p12</code> æ–‡ä»¶ï¼Œä¹‹åéœ€è¦æ·»åŠ åˆ°æå…‰åå°ã€‚</p>
<figure data-type="image" tabindex="15"><img src="https://nwc7cp.coding-pages.com/post-images/1586235903947.png" alt="" loading="lazy"></figure>
<p>ç‚¹å‡»å­˜å‚¨åéœ€è¦è¾“å…¥å¯†ç ï¼Œå¯†ç è¦è®°ä½ï¼Œä¸Šä¼ åˆ°æå…‰åå°éœ€è¦ç”¨åˆ°ã€‚</p>
<figure data-type="image" tabindex="16"><img src="https://nwc7cp.coding-pages.com/post-images/1586236061023.png" alt="" loading="lazy"></figure>
<p>å‡è®¾ä½ çš„æå…‰åå°åº”ç”¨ä¿¡æ¯å·²ç»å¡«å†™å¥½ï¼Œè®¾ç½®è¯ä¹¦æ—¶å¦‚ä¸‹å›¾ï¼š</p>
<figure data-type="image" tabindex="17"><img src="https://nwc7cp.coding-pages.com/post-images/1586236293643.png" alt="" loading="lazy"></figure>
<p>ä¸Šä¼ ä¹‹å‰å¯¼å‡ºçš„ <code>.p12</code> æ–‡ä»¶ï¼Œå¡«å†™å¯¼å‡ºæ—¶è®¾ç½®çš„å¯†ç ï¼Œæå…‰ä¼šåœ¨åå°ä¸ºä½ çš„åº”ç”¨è¿›è¡Œé‰´æƒã€‚</p>
<figure data-type="image" tabindex="18"><img src="https://nwc7cp.coding-pages.com/post-images/1586236303663.png" alt="" loading="lazy"></figure>
<h2 id="åˆ›å»ºé…ç½®æ–‡ä»¶">åˆ›å»ºé…ç½®æ–‡ä»¶</h2>
<p>åˆ›å»º Provisioning Profile çš„å‰æï¼Œå·²åœ¨ Apple Developer ç½‘ç«™åˆ›å»ºå¾…å‘å¸ƒåº”ç”¨æ‰€ä½¿ç”¨çš„ Bundle ID çš„ App IDã€‚</p>
<p>é€‰æ‹© Profile ç‚¹å‡»åŠ å·æŒ‰é’®ï¼Œåˆ›å»º Provisioning Profileã€‚</p>
<figure data-type="image" tabindex="19"><img src="https://nwc7cp.coding-pages.com/post-images/1586230645086.png" alt="" loading="lazy"></figure>
<p>é€‰æ‹©ä½ éœ€è¦çš„ Profile ç¯å¢ƒã€‚</p>
<figure data-type="image" tabindex="20"><img src="https://nwc7cp.coding-pages.com/post-images/1586237441979.png" alt="" loading="lazy"></figure>
<p>é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ App IDã€ç›¸åº”çš„è¯ä¹¦ã€æµ‹è¯•çš„è®¾å¤‡ã€profile åç§°ï¼Œä¸€ç›´ Continue å³å¯ã€‚</p>
<figure data-type="image" tabindex="21"><img src="https://nwc7cp.coding-pages.com/post-images/1586231384208.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="22"><img src="https://nwc7cp.coding-pages.com/post-images/1586231669480.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="23"><img src="https://nwc7cp.coding-pages.com/post-images/1586231591517.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="24"><img src="https://nwc7cp.coding-pages.com/post-images/1586234979603.png" alt="" loading="lazy"></figure>
<p>å¡«å†™å®Œ Profile Name ç‚¹å‡» generate å®Œæˆï¼Œä¹‹åç‚¹å‡» DownLoadï¼Œä¸‹è½½ <code>.mobileprovision</code> çš„æ–‡ä»¶ï¼ŒåŒå‡»æ–‡ä»¶å³å¯æ·»åŠ åˆ° Xcodeã€‚</p>
<figure data-type="image" tabindex="25"><img src="https://nwc7cp.coding-pages.com/post-images/1586235137886.png" alt="" loading="lazy"></figure>
<p>è‡³æ­¤è¯ä¹¦å’Œé…ç½®æ–‡ä»¶ä¹‹ç±»çš„éƒ½åˆ›å»ºå®Œäº†ã€‚</p>
<h2 id="å…¶ä»–é—®é¢˜">å…¶ä»–é—®é¢˜</h2>
<h3 id="xcode-missing-private-key-è§£å†³æ–¹æ¡ˆ">Xcode Missing Private key è§£å†³æ–¹æ¡ˆ</h3>
<p>å½“æˆ‘ä»¬æ¢å¦ä¸€å° Mac è®¾å¤‡å¼€å‘æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šå‘ç°æç¤º <code>Missing Private key</code>ã€‚</p>
<p>å› ä¸ºè‹¹æœè§„å®š <code>.cer</code> è¯ä¹¦åªèƒ½å­˜åœ¨äºä¸€å°æœºå™¨ä¸Šï¼Œå› æ­¤å¦‚æœå¦ä¸€å°ç”µè„‘æƒ³è¦ç”¨çš„è¯ï¼Œéœ€è¦å¯¼å‡ºä¸º <code>.p12</code> æ–‡ä»¶ï¼Œå®‰è£…åˆ°å¦ä¸€å°æ²¡æœ‰å®‰è£… <code>.cer</code> æ–‡ä»¶çš„ Mac ç”µè„‘ã€‚</p>
<p>è¯¦ç»†è¯´æ˜å‚è€ƒè¯¥ç¯‡åšå®¢ <a href="https://www.jianshu.com/p/6372055fbaa0" target="_blank">https://www.jianshu.com/p/6372055fbaa0</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Vue æºç åˆ†æ â€” å“åº”å¼åŸç†]]></title>
        <id>https://nwc7cp.coding-pages.com/post/vue-yuan-ma-fen-xi-xiang-ying-shi-yuan-li/</id>
        <link href="https://nwc7cp.coding-pages.com/post/vue-yuan-ma-fen-xi-xiang-ying-shi-yuan-li/">
        </link>
        <updated>2020-03-15T11:50:48.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>Vue æ˜¯ç›®å‰æµè¡Œå‰ç«¯æ¡†æ¶ï¼Œå…¶ç‹¬ç‰¹çš„ç‰¹æ€§æ˜¯å…¶éä¾µå…¥æ€§çš„å“åº”å¼ç³»ç»Ÿã€‚å½“ä¾¦æµ‹åˆ°æ•°æ®çš„å˜åŒ–æ¥æ›´æ–°è§†å›¾ï¼ŒåŸç†æ ¸å¿ƒæ˜¯ä½¿ç”¨ <code>Object.defineProperty</code> æ–¹æ³•ã€‚æœ¬æ–‡å¯¹å“åº”å¼åŸç†è¿›è¡Œåˆ†æï¼Œå‚ç…§ vue æºç å®ç°ç®€æ˜“ç‰ˆçš„æ•°æ®å“åº”å¼ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1584274877854.png" alt="" loading="lazy"></figure>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<p>æœ¬æ–‡å®Œæ•´ä»£ç ç‚¹å‡»<a href="https://github.com/jrb1995/vue-mine" target="_blank">è¿™é‡Œ</a></p>
<pre><code class="language-js">import { def, isObject } from '../util/index'

class Observer {
  constructor (value) {
    this.value = value
    // é€šè¿‡ defineProperty ä¸ºå¯¹è±¡æ·»åŠ  __ob__ å±æ€§ï¼Œå¹¶ä¸”é…ç½®ä¸ºä¸å¯æšä¸¾
    // è¿™æ ·åšçš„æ„ä¹‰æ˜¯å¯¹è±¡éå†æ—¶ä¸ä¼šéå†åˆ° __ob__ å±æ€§
    def(value, '__ob__', this)
    this.walk(value)
  }

  walk (obj) {
    const keys = Object.keys(obj)
    for (let i = 0; i &lt; keys.length; i++) {
      defineReactive(obj, keys[i], obj[keys[i]])
    }
  }
}

function defineReactive (obj, key, val) {
  // å¦‚æœ val æ˜¯å¯¹è±¡çš„è¯é€’å½’ç›‘å¬
  observe(val)
  Object.defineProperty(obj, key, {
    enumerable: true, // å¯æšä¸¾
    configurable: true, // å¯é…ç½®
    get: function reactiveGetter () {
      return val
    },
    set: function reactiveSetter (newVal) {
      if (newVal === val || (newVal !== newVal &amp;&amp; val !== val)) {
        return
      }
      val = newVal
      // å¦‚æœèµ‹å€¼æ˜¯å¯¹è±¡çš„è¯ä¹Ÿè¦é€’å½’ç›‘å¬
      observe(newVal)
      console.log('ä¾¦æµ‹åˆ°æ•°æ®å˜åŒ–', newVal);
    }
  })
}

export function observe (value) {
  // ç±»å‹åˆ¤æ–­ï¼Œä¸æ˜¯å¯¹è±¡ç±»å‹ç›´æ¥è¿”å›
  if (!isObject(value)) {
    return
  }
  let ob = new Observer(value)
  return ob
}
</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç ä¸»è¦ä½œç”¨åœ¨äºï¼š<code>observe</code> å‡½æ•°ä¼ å…¥ä¸€ä¸ª <code>value</code> (éœ€è¦è¢«è¿½è¸ªå˜åŒ–çš„å¯¹è±¡)ï¼Œä½œä¸º <code>Observer</code> ç±»çš„å‚æ•°å®ä¾‹åŒ–ï¼Œéå†æ‰€æœ‰å±æ€§å¯¹è¯¥å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§éƒ½é€šè¿‡ <code>defineReactive</code> å¤„ç†ï¼Œ åœ¨ <code>defineReactive</code> æ–¹æ³•å†… <code>observe</code> ä¼šè¿›è¡Œé€’å½’è°ƒç”¨ï¼Œä»¥æ­¤æ¥è¾¾åˆ°å®ç°ä¾¦æµ‹å¯¹è±¡å˜åŒ–ã€‚</p>
<p>æ¥ä¸‹æ¥å®ç° <code>Vue</code> ç±»ï¼Œå¯¹ options ä¸­çš„ data ä¼ å…¥ observe å¼€å‘è¿›è¡Œåˆå§‹åŒ–æ•°æ®ä¾¦æµ‹ã€‚</p>
<pre><code class="language-js">import { observe } from '../observer/index'

const sharedPropertyDefinition = {
  enumerable: true,
  configurable: true,
  get: function () {},
  set: function () {}
}

function proxy (target, sourceKey, key) {
  sharedPropertyDefinition.get = function proxyGetter () {
    return this[sourceKey][key]
  }
  sharedPropertyDefinition.set = function proxySetter (val) {
    this[sourceKey][key] = val
  }
  Object.defineProperty(target, key, sharedPropertyDefinition)
}

function Vue (options) {
  let vm = this
  let data = options.data
  vm._data = data

  const keys = Object.keys(data)
  let i = keys.length
  while (i--) {
    const key = keys[i]
    // å¯ä»¥è®© vm._data.x é€šè¿‡ vm.x è®¿é—®
    proxy(vm, `_data`, key)
  }

  observe(data)
}

export default Vue
</code></pre>
<p>å®ä¾‹åŒ– Vue ç±»ï¼ŒæŸ¥çœ‹æ§åˆ¶å°çš„è¾“å‡º vmã€‚</p>
<pre><code class="language-js">import Vue from './instance/index'

const vm = new Vue({
  data: {
    message: 'hello',
    location: { x: 100, y: 100 },
    arr: [1]
  }
})

window.vm = vm

// åœ¨æ§åˆ¶å°è¾“å…¥ï¼š vm.location = { x: 10, y: 10 } 
// è¾“å‡ºï¼šä¾¦æµ‹åˆ°æ•°æ®å˜åŒ– {__ob__: Observer}
// è¾“å…¥ï¼švm.location.z = 10
// è¾“å‡ºï¼š10
// è¾“å…¥ï¼švm.arr.push(2)
// è¾“å‡ºï¼š2
</code></pre>
<p>ä»ä¸­å¯ä»¥çœ‹åˆ°å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤</li>
</ul>
<p>é€šè¿‡ <code>Object.defineProperty</code> æ¥å°†å¯¹è±¡çš„keyè½¬æ¢æˆ <code>getter/setter</code> çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œä½† <code>getter/setter</code> åªèƒ½è¿½è¸ªä¸€ä¸ªæ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ï¼Œæ— æ³•è¿½è¸ªæ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§ã€‚</p>
<p>å®ç° Vue æä¾›çš„ <code>set</code> å’Œ <code>delete</code> æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ /åˆ é™¤å“åº”å¼å±æ€§ã€‚</p>
<ul>
<li>ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œéœ€è¦è¿›è¡Œæ•°ç»„æ–¹æ³•çš„é‡å†™</li>
</ul>
<p>è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">// array.js
// è·å¾—æ•°ç»„åŸå‹
const arrayProto = Array.prototype
export const arrayMethods = Object.create(arrayProto)
// åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„åŸå‹ å¹¶ä¸”é‡å†™ methods è¿™äº›æ–¹æ³•
const methodsToPatch = [
  'push',
  'pop',
  'shift',
  'unshift',
  'splice',
  'sort',
  'reverse'
]

methodsToPatch.forEach(function (method) {
  const original = arrayProto[method]
  arrayMethods[method] = function (...args) {
    const result = original.apply(this, args)
    return result
  }
})
</code></pre>
<p>åœ¨ <code>observer/index.js</code> ä¸­å¯¼å…¥ <code>arrayMethods</code> é‡å†™çš„åŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="language-js">import { arrayMethods } from './array'
import { def, isObject } from '../util/index'

class Observer {
  constructor (value) {
    this.value = value
    def(value, '__ob__', this)
    if (Array.isArray(value)) {
      value.__proto__ = arrayMethods
      this.observeArray(value)
    } else {
      this.walk(value)
    }
  }

  walk (obj) {
    const keys = Object.keys(obj)
    for (let i = 0; i &lt; keys.length; i++) {
      defineReactive(obj, keys[i], obj[keys[i]])
    }
  }

  observeArray (items) {
    for (let i = 0, l = items.length; i &lt; l; i++) {
      observe(items[i])
    }
  }
}
</code></pre>
<p>ä»¥ä¸Šä»£ç å®ç°äº†æ•°æ®åŠ«æŒï¼Œæ¥ä¸‹æ¥éœ€è¦å®ç°æ”¶é›†ä¾èµ–ä»¥åŠæ•°æ®æ›´æ–°æ—¶æ´¾å‘æ›´æ–°ï¼Œå…¶ä¸­çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯<code>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</code>ã€‚å…³äºè®¢é˜…è€… <code>Dep</code> å’Œè§‚å¯Ÿè€… <code>Watcher</code> ç›¸å…³ä»£ç ã€‚</p>
<p><strong>è®¢é˜…è€… Dep</strong></p>
<pre><code class="language-js">import { remove } from '../util/index'

export default class Dep {
  constructor () {
    /* ç”¨æ¥å­˜æ”¾ Watcher å¯¹è±¡çš„æ•°ç»„ */
    this.subs = []
  }

  /* åœ¨ subs ä¸­æ·»åŠ ä¸€ä¸ª Watcher å¯¹è±¡ */
  addSub (sub) {
    this.subs.push(sub)
  }

  removeSub (sub) {
    remove(this.subs, sub)
  }
  
  depend () {
    if (Dep.target) {
      Dep.target.addDep(this)
    }
  }

  /* é€šçŸ¥æ‰€æœ‰ Watcher å¯¹è±¡æ›´æ–°è§†å›¾ */
  notify () {
    const subs = this.subs.slice()
    for (let i = 0, l = subs.length; i &lt; l; i++) {
      subs[i].update()
    }
  }
}

/* åœ¨ watcher.js ä¸­è°ƒç”¨ï¼Œå°† Watcher å®ä¾‹èµ‹å€¼ç»™ Dep.target */ 
Dep.target = null
</code></pre>
<p><strong>è§‚å¯Ÿè€… Watcher</strong></p>
<pre><code class="language-js">import Dep from './dep'

export default class Watcher {
  constructor (vm, expOrFn, cb) {
    this.vm = vm
    this.getter = expOrFn || function () {}
    this.cb = cb
    this.value = this.get()
  }

  get () {
    Dep.target = this

    const vm = this.vm
    let value = this.getter.call(vm, vm)
    return value
  }

  addDep(dep) {
    dep.addSub(this)
  }

  update () {
    console.log('æ›´æ–°value:', this.value)
  }
}
</code></pre>
<p>åœ¨æ‰§è¡Œæ„é€ å‡½æ•°çš„æ—¶å€™å°† <code>Dep.target</code> æŒ‡å‘è‡ªèº«ï¼Œä»è€Œä½¿å¾—æ”¶é›†åˆ°äº†å¯¹åº”çš„ <code>Watcher</code>ï¼Œåœ¨æ´¾å‘æ›´æ–°çš„æ—¶å€™å–å‡ºå¯¹åº”çš„ <code>Watcher</code>ï¼Œç„¶åæ‰§è¡Œ <code>update</code> å‡½æ•°ã€‚</p>
<p>æœ€åå¯¹ <code>defineReactive</code> å‡½æ•°å’Œ <code>Vue</code> ç±»è¿›è¡Œæ”¹é€ </p>
<pre><code class="language-js">export function defineReactive (obj, key, val) {
  const dep = new Dep()
  let childOb = observe(val)
  
  Object.defineProperty(obj, key, {
    enumerable: true,
    configurable: true,
    get: function reactiveGetter () {
      // å°† Watcher æ·»åŠ åˆ°è®¢é˜…  
      dep.depend()
      return val
    },
    set: function reactiveSetter (newVal) {
      if (newVal === val || (newVal !== newVal &amp;&amp; val !== val)) {
        return
      }
      val = newVal
      childOb = observe(newVal)
      // æ‰§è¡Œ watcher çš„ update æ–¹æ³•
      dep.notify()
    }
  })
}
</code></pre>
<pre><code class="language-js">function Vue (options) {
  let vm = this
  let data = options.data
  vm._data = data

  const keys = Object.keys(data)
  let i = keys.length
  while (i--) {
    const key = keys[i]
    proxy(vm, `_data`, key)
  }

  observe(data)
  /* æ–°å»ºä¸€ä¸ª Watcher è§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™æ—¶å€™ Dep.target ä¼šæŒ‡å‘è¿™ä¸ª Watcher å¯¹è±¡ */
  new Watcher(data, val =&gt; val)
}
</code></pre>
<p>å½“ render function è¢«æ¸²æŸ“çš„æ—¶å€™ï¼Œè¯»å–æ‰€éœ€å¯¹è±¡çš„å€¼ï¼Œä¼šè§¦å‘ reactiveGetter å‡½æ•°æŠŠå½“å‰çš„ Watcher å¯¹è±¡ï¼ˆå­˜æ”¾åœ¨ Dep.target ä¸­ï¼‰æ”¶é›†åˆ° Dep ç±»ä¸­å»ã€‚ä¹‹åå¦‚æœä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œåˆ™ä¼šè§¦å‘ reactiveSetter æ–¹æ³•ï¼Œé€šçŸ¥ Dep ç±»è°ƒç”¨ notify æ¥è§¦å‘æ‰€æœ‰ Watcher å¯¹è±¡çš„ update æ–¹æ³•æ›´æ–°å¯¹åº”è§†å›¾ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>æœ¬æ–‡åœ¨é˜…è¯» Vue æºç åï¼Œæ ¹æ®è‡ªå·±çš„ç†è§£åŠ ä¸Šå‚è€ƒå…¶ä»–æ–‡ç« ï¼Œç¼–å†™çš„ä¸€ä¸ªç²¾ç®€ä»£ç å®ç°ã€‚å…¶ä¸­ä»£ç å®ç°å¹¶ä¸ä¸¥è°¨ä»¥åŠè‡ªèº«çš„ç†è§£ä¸åˆ°ä½ï¼Œåœ¨æ­¤æ·±è¡¨æƒ­æ„§ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[GitHub Actions è‡ªåŠ¨éƒ¨ç½²å®è·µ]]></title>
        <id>https://nwc7cp.coding-pages.com/post/github-actions-zi-dong-bu-shu-shi-jian/</id>
        <link href="https://nwc7cp.coding-pages.com/post/github-actions-zi-dong-bu-shu-shi-jian/">
        </link>
        <updated>2020-02-13T11:16:59.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>GitHub Actions æ˜¯ GitHub æ¨å‡ºçš„æŒç»­é›†æˆæœåŠ¡ï¼Œè¯­æ³•ä»‹ç»å¯ä»¥çœ‹ <a href="https://github.com/features/actions" target="_blank">å®˜æ–¹æ–‡æ¡£</a> æˆ–è€… <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank">é˜®ä¸€å³°è€å¸ˆçš„åšå®¢</a>ã€‚äºæ˜¯æœ¬ç€æŠ˜è…¾çš„å¿ƒæ€æ¥è‡ªåŠ¨å‘å¸ƒä¸€ä¸ª vue åº”ç”¨åˆ°è‡ªå·±çš„ GitHub Pagesã€‚</p>
<h2 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h2>
<p>ä½¿ç”¨ <a href="https://cli.vuejs.org/zh/" target="_blank">vue-cli</a> åˆ›å»ºä¸€ä¸ªç®€å•çš„ vue é¡¹ç›®</p>
<pre><code>vue create github-actions-demo
</code></pre>
<blockquote>
<p>Vue Router ä¸è¦é€‰æ‹© History æ¨¡å¼ï¼Œå‘å¸ƒåˆ° github page æ˜¯ä¸€ä¸ªçº¯å‰ç«¯é™æ€é¡µé¢ï¼Œè€Œ History æ¨¡å¼éœ€è¦åå°é…ç½®æ”¯æŒã€‚</p>
</blockquote>
<p>é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œè¿˜éœ€è¦åœ¨ <code>vue.config.js</code> ä¸­è®¾ç½®æ­£ç¡®çš„ <code>publicPath</code>ã€‚</p>
<p>å¦‚æœæ‰“ç®—å°†é¡¹ç›®éƒ¨ç½²åˆ° <code>https://&lt;USERNAME&gt;.github.io/</code> ä¸Šï¼Œ<code>publicPath</code> é»˜è®¤ä¸º <code>&quot;/&quot;</code> å¯ä»¥å¿½ç•¥è¿™ä¸ªå‚æ•°ã€‚</p>
<p>å¦‚æœæ‰“ç®—å°†é¡¹ç›®éƒ¨ç½²åˆ° <code>https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;/</code> ä¸Šï¼ˆå³ä»“åº“åœ°å€ä¸º <code>https://github.com/&lt;USERNAME&gt;/&lt;REPO&gt;</code>ï¼‰ï¼Œå°† <code>publicPath</code> è®¾ä¸º <code>&quot;/&lt;REPO&gt;/&quot;</code>ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä»“åº“åå­—ä¸º â€œmy-projectâ€ï¼Œé‚£ä¹ˆ <code>vue.config.js</code> çš„å†…å®¹åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-js">module.exports = {
  publicPath: process.env.NODE_ENV === 'production'
    ? '/my-project/'
    : '/'
}
</code></pre>
<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<p>åˆ›å»ºä¸€ä¸ª GitHub ä»“åº“ï¼Œä»¥åŠé…ç½® GitHub å¯†é’¥ã€‚</p>
<ol>
<li>
<p>ç”³è¯·ä¸€ä¸ª access tokens</p>
<p>ç‚¹å‡»å¤´åƒ <code>Setting</code> &gt; <code>Developer setttings</code> &gt; <code>Personal access tokens</code></p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1581598562909.jpeg" alt="" loading="lazy"></figure>
<p>ç‚¹å‡» <code>Generate new token</code> æŒ‰é’®ï¼Œå‹¾é€‰å¥½æƒé™ç”Ÿæˆ tokenï¼Œè®°ä¸‹ç”Ÿæˆçš„ token ä¹‹åéœ€è¦ç”¨åˆ°ã€‚</p>
</li>
<li>
<p>åœ¨åˆ›å»ºçš„ä»“åº“ä¸­ç‚¹å‡»  <code>Settings</code> &gt; <code>Secrets</code> &gt; <code>Add a new secret</code></p>
<figure data-type="image" tabindex="2"><img src="https://nwc7cp.coding-pages.com/post-images/1581598887444.png" alt="" loading="lazy"></figure>
<p>Name éšæ„å¡«å†™ï¼ŒValue å¡«å…¥åˆšç”³è¯·çš„ token å€¼</p>
</li>
</ol>
<h2 id="ç¼–å†™-yml-æ–‡ä»¶">ç¼–å†™ yml æ–‡ä»¶</h2>
<pre><code class="language-yml">name: GitHub Actions Build and Deploy Demo
on:
  push:
    branches:
      - master # æ•´ä¸ªæµç¨‹åœ¨masteråˆ†æ”¯å‘ç”Ÿpushäº‹ä»¶æ—¶è§¦å‘
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@master

    - name: Build and Deploy
      uses: JamesIves/github-pages-deploy-action@releases/v2
      env:
        ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }} # å¯†é’¥
        BRANCH: gh-pages # å‘å¸ƒåˆ†æ”¯
        FOLDER: dist # vue-cli build åçš„ç›®å½•
        BUILD_SCRIPT: npm install &amp;&amp; npm run build # æ„å»ºè„šæœ¬
</code></pre>
<h2 id="æœ€åå·¥ä½œ">æœ€åå·¥ä½œ</h2>
<p>ä¿å­˜æ–‡ä»¶åï¼Œå°†æ•´ä¸ªä»“åº“æ¨é€åˆ° GitHubï¼Œå®Œæ•´çš„ <a href="https://github.com/jrb1995/github-actions-demo" target="_blank">ä»£ç ä»“åº“</a> åœ¨è¿™é‡Œã€‚</p>
<p>Actions å¼€å§‹è‡ªåŠ¨è¿è¡Œï¼Œæ¥ç€ç­‰å¾…å®ƒå®Œæˆã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://nwc7cp.coding-pages.com/post-images/1581599890441.jpeg" alt="" loading="lazy"></figure>
<p>ç­‰ workflow è¿è¡Œç»“æŸï¼Œè®¿é—® <a href="https://jrb1995.github.io/github-actions-demo/#/" target="_blank">GitHub Page</a> å°±å¯ä»¥çœ‹åˆ°é¡µé¢äº†ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://nwc7cp.coding-pages.com/post-images/1581600153643.png" alt="" loading="lazy"></figure>
<p>ä»¥åï¼Œæ¯æ¬¡ä¿®æ”¹åæ¨é€æºç ï¼ŒGitHub Actions éƒ½ä¼šè‡ªåŠ¨è¿è¡Œï¼Œå°†æ„å»ºäº§ç‰©å‘å¸ƒåˆ°ç½‘é¡µã€‚</p>
<blockquote>
<p>GitHub Page ä¼šæœ‰ç”Ÿæ•ˆæ—¶é—´ï¼Œåœ¨ Settings ä¸­ GitHub Pages çœ‹åˆ°é…ç½®å¦‚ä¸‹æ—¶å°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p>
</blockquote>
<figure data-type="image" tabindex="5"><img src="https://nwc7cp.coding-pages.com/post-images/1581600456035.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Git Commit Message è§„èŒƒåŒ–å®è·µ]]></title>
        <id>https://nwc7cp.coding-pages.com/post/git-commit-message-gui-fan-hua-shi-jian/</id>
        <link href="https://nwc7cp.coding-pages.com/post/git-commit-message-gui-fan-hua-shi-jian/">
        </link>
        <updated>2020-02-06T03:21:31.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>åœ¨å¤šäººåä½œå¼€å‘é¡¹ç›®æ—¶ï¼Œå¦‚æœæ²¡æœ‰è§„èŒƒçº¦æŸ git commit messageï¼Œå®¹æ˜“é€ æˆå„ç§æäº¤çš„é£æ ¼äº”èŠ±å…«é—¨ã€‚è€Œè§„èŒƒçš„æäº¤ä¿¡æ¯èƒ½è®©ä»–äººå¿«é€Ÿäº†è§£æ­¤æ¬¡æäº¤çš„ç›®çš„ï¼Œè¿˜å¯ä»¥æœ‰æ•ˆçš„è¾“å‡º CHANGELOGï¼Œå¯¹é¡¹ç›®çš„ç®¡ç†è‡³å…³é‡è¦ã€‚</p>
<h2 id="commit-message-çš„æ ¼å¼">Commit message çš„æ ¼å¼</h2>
<p>ç›®å‰åº”ç”¨æ¯”è¾ƒå¹¿æ³›çš„æ˜¯ <a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines" target="_blank">Angular å›¢é˜Ÿçš„è§„èŒƒ</a>ï¼Œå®ƒçš„ message æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-xml">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
&lt;BLANK LINE&gt;
&lt;body&gt;
&lt;BLANK LINE&gt;
&lt;footer&gt;
</code></pre>
<p><code>type</code> ç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>featï¼šæ–°åŠŸèƒ½</li>
<li>fixï¼šä¿®å¤ bug</li>
<li>docsï¼šæ–‡æ¡£ä¿®æ”¹</li>
<li>styleï¼šä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</li>
<li>refactorï¼šä»£ç é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰</li>
<li>perfï¼šä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ</li>
<li>testï¼šå¢åŠ æµ‹è¯•</li>
<li>revertï¼šå›æ»š</li>
<li>choreï¼šå…¶ä»–ä¿®æ”¹ï¼Œæ¯”å¦‚æ„å»ºæµç¨‹ã€ä¾èµ–ç®¡ç†</li>
<li>...</li>
</ul>
<p><code>scope</code> ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒ</p>
<p><code>subject</code> æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°</p>
<p><code>body</code> æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œ</p>
<p><code>footer</code> ä¸€äº›å¤‡æ³¨ï¼Œé€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥</p>
<h2 id="commitizen">Commitizen</h2>
<p>äº†è§£è§„èŒƒæ ¼å¼åï¼Œå°±éœ€è¦é€šè¿‡ <a href="https://github.com/commitizen/cz-cli" target="_blank">Commitizen</a> å€ŸåŠ©å®ƒæä¾›çš„ git cz å‘½ä»¤æ›¿ä»£æˆ‘ä»¬çš„ git commit å‘½ä»¤ï¼Œå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit messageã€‚</p>
<p>æ¨èåœ¨æœ¬åœ°å®‰è£…çš„æ–¹å¼</p>
<pre><code>npm install commitizen --save-dev
</code></pre>
<p>æ¥ç€ä¸º commitizen åˆå§‹åŒ– Adapter</p>
<p>åœ¨ npm 5.2+ ä½ å¯ä»¥ä½¿ç”¨ <a href="http://www.ruanyifeng.com/blog/2019/02/npx.html" target="_blank">npx</a> æ¥åˆå§‹åŒ– Adapter</p>
<pre><code>npx commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre>
<blockquote>
<p>npm &lt; 5.2 å¯ä»¥æ‰§è¡Œ <code>./node_modules/.bin/commitizen or ./node_modules/.bin/git-cz</code></p>
</blockquote>
<p>å¹¶åœ¨ package.json ä¸­æ·»åŠ  npm scripts è¿è¡Œè„šæœ¬</p>
<p>package.json ä¼šæ–°å¢å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-json">&quot;scripts&quot;: {
    &quot;commit&quot;: &quot;git-cz&quot;
},
&quot;devDependencies&quot;: {
    &quot;commitizen&quot;: &quot;^4.0.3&quot;,
    &quot;cz-conventional-changelog&quot;: &quot;^3.1.0&quot;,
},
&quot;config&quot;: {
    &quot;commitizen&quot;: {
      &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot;
    }
}
</code></pre>
<p>ä¹‹åå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­æ‰§è¡Œ <code>npm run commit</code> æˆ–è€… <code>npx git cz</code>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1580967235373.jpeg" alt="" loading="lazy"></figure>
<h2 id="standard-version-è‡ªåŠ¨ç”Ÿæˆ-changelog">standard-version: è‡ªåŠ¨ç”Ÿæˆ CHANGELOG</h2>
<p>ä½¿ç”¨å·¥å…·åæˆ‘ä»¬çš„å·¥ç¨‹ commit message åº”è¯¥æ˜¯ç¬¦åˆ Angular å›¢é˜Ÿé‚£å¥—ï¼Œè¿™æ ·ä¹Ÿä¾¿äºæˆ‘ä»¬å€ŸåŠ© <a href="https://github.com/conventional-changelog/standard-version" target="_blank">standard-version</a> è¿™æ ·çš„å·¥å…·ï¼Œè‡ªåŠ¨ç”Ÿæˆ CHANGELOGã€‚</p>
<p>æœ¬åœ°å®‰è£…</p>
<pre><code class="language-shell">npm install standard-version --save-dev
</code></pre>
<p>åœ¨ package.json æ·»åŠ è¿è¡Œè„šæœ¬</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;release&quot;: &quot;standard-version&quot;
  }
}
</code></pre>
<p>è¿è¡Œè„šæœ¬åï¼Œæ•ˆæœå¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://nwc7cp.coding-pages.com/post-images/1580970514212.jpeg" alt="" loading="lazy"></figure>
<p>æ›´å¤šä½¿ç”¨ç‰¹æ€§è¯¦è§å…¶æ–‡æ¡£</p>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>æŸ¥çœ‹å®Œæ•´çš„ <a href="https://github.com/jrb1995/standard-commit" target="_blank">demo</a></p>
<p>æ­¤æ–‡æ˜¯é€‚åˆè‡ªå·±çš„ä¸€ä¸ªç®€å•é€šç”¨é…ç½®ï¼Œå¦‚ä½¿ç”¨ commitlint æ›´ä¸¥æ ¼çš„æ ¡éªŒ message ä»¥åŠå…¶ä»–è‡ªå®šä¹‰é…ç½®ï¼Œå¯è§ä»¥ä¸‹å‚è€ƒèµ„æ–™ä¸­çš„é“¾æ¥</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>
<p><a href="https://juejin.im/post/5afc5242f265da0b7f44bee4" target="_blank">ä¼˜é›…çš„æäº¤ä½ çš„ Git Commit Message</a></p>
</li>
<li>
<p><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank">Commit message å’Œ Change log ç¼–å†™æŒ‡å—</a></p>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[scrollIntoView å®ç°é¡µé¢é”šç‚¹]]></title>
        <id>https://nwc7cp.coding-pages.com/post/scrollintoview-shi-xian-ye-mian-mao-dian/</id>
        <link href="https://nwc7cp.coding-pages.com/post/scrollintoview-shi-xian-ye-mian-mao-dian/">
        </link>
        <updated>2020-01-30T03:12:12.000Z</updated>
        <summary type="html"><![CDATA[<p>é”šç‚¹å³æŒ‡ html ä¸­çš„é“¾æ¥ï¼Œåœ¨é¡µé¢ä¸­é€‚å½“çš„æ·»åŠ é”šç‚¹å¯ä»¥å¤§å¤§æé«˜é˜…è¯»æˆ–æŸ¥æ‰¾æ•ˆç‡</p>
]]></summary>
        <content type="html"><![CDATA[<p>é”šç‚¹å³æŒ‡ html ä¸­çš„é“¾æ¥ï¼Œåœ¨é¡µé¢ä¸­é€‚å½“çš„æ·»åŠ é”šç‚¹å¯ä»¥å¤§å¤§æé«˜é˜…è¯»æˆ–æŸ¥æ‰¾æ•ˆç‡</p>
<!-- more -->
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>é”šç‚¹æ˜¯ç½‘ç«™ä¸­å¸¸ç”¨çš„åŠŸèƒ½ã€‚å‰ç«¯ç®€å•å®ç°é”šç‚¹çš„æ–¹æ³•ï¼Œä½¿ç”¨ a æ ‡ç­¾æŠŠ href å±æ€§å†™æˆè¦è·³è½¬åˆ°çš„å…ƒç´  idï¼Œæ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-html">&lt;a href=&quot;#anchor&quot;&gt;&lt;/a&gt;

&lt;div id=&quot;anchor&quot;&gt;&lt;/div&gt;
</code></pre>
<p>ç‚¹å‡» a æ ‡ç­¾é¡µé¢å°±ä¼šè·³è½¬åˆ°æŒ‡å®š id å…ƒç´ çš„ä½ç½®ã€‚å¹¶æ”¹å˜é“¾æ¥åœ°å€æ¯”å¦‚ï¼š<code>http://www.xxxx.com#anchor</code>ã€‚</p>
<p>è™½ç„¶ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç›´æ¥è·³è½¬è¿‡å»ç«‹é©¬å®Œæˆäº§å“çš„éœ€æ±‚ï¼Œä½†æ˜¯å½“ç½‘é¡µä¸­å­˜åœ¨å¤šä¸ªé”šç‚¹æ—¶ï¼Œå°±ä¼šå‡ºç°ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®å¹¶ä¸ä¼šè¿”å›ä¹‹å‰æµè§ˆçš„ç½‘é¡µï¼Œè€Œæ˜¯è¿”å›ä¸Šä¸€ä¸ªå¸¦æœ‰é”šç‚¹çš„é“¾æ¥ã€‚</p>
<blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“å‰ç½‘ç«™é“¾æ¥æ˜¯ <code>http://www.xxxx.com#anchor2</code>ï¼Œ å½“ç”¨æˆ·æƒ³è¿”å›ä¹‹å‰çš„é¡µé¢ï¼Œç‚¹å‡»åé€€æŒ‰é’®åï¼Œé“¾æ¥å˜æˆäº† <code>http://www.xxxx.com#anchor1</code>ã€‚ä½†è¿˜æ˜¯åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ï¼Œä¼šä½¿ç”¨æˆ·æ„Ÿåˆ°è¿·æƒ‘ï¼Œé™ä½ç”¨æˆ·ä½“éªŒã€‚</p>
</blockquote>
<h2 id="è§£å†³é—®é¢˜">è§£å†³é—®é¢˜</h2>
<p><code>scrollIntoView()</code> æ–¹æ³•è®©å½“å‰çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§†åŒºåŸŸå†…ï¼Œè¯¦è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView">MDN</a> å¯¹æ­¤æ–¹æ³•ä»‹ç»ã€‚</p>
<p>ç®€å•ä»£ç å®ç°ï¼š</p>
<pre><code class="language-html">&lt;!-- HTML --&gt;
&lt;div onclick='getAnchor('anchor_1')'&gt;å®šä½åˆ°é”šç‚¹ä¸€&lt;/div&gt;
&lt;div onclick='getAnchor('anchor_2')'&gt;å®šä½åˆ°é”šç‚¹äºŒ&lt;/div&gt;

&lt;div id='anchor_1'&gt;é”šç‚¹ä½ç½®ä¸€&lt;/div&gt;
&lt;div id='anchor_2'&gt;é”šç‚¹ä½ç½®äºŒ&lt;/div&gt;
</code></pre>
<pre><code class="language-js">&lt;!-- JS --&gt;
function getAnchor (id) {
    // è·³è½¬åˆ°é”šç‚¹
    document.getElementById(id).scrollIntoView()
}
</code></pre>
<p>å¦‚æœéœ€è¦è®©é¡µé¢å¹³æ»‘æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œåˆ™éœ€è¦å¢åŠ å‚æ•° <code>behavior</code> è®¾ç½®å…¶å€¼ä¸º <code>smooth</code></p>
<pre><code class="language-js">document.documentElement.scrollIntoView({
    behavior: &quot;smooth&quot;,
    block: &quot;start&quot;,
    inline: &quot;nearest&quot;
});
</code></pre>
<h2 id="å…¶ä»–ä½¿ç”¨åœºæ™¯">å…¶ä»–ä½¿ç”¨åœºæ™¯</h2>
<p><strong>å›åˆ°é¡¶éƒ¨</strong> ä¹Ÿæ˜¯ç½‘é¡µä¸­å¸¸ç”¨åŠŸèƒ½ã€‚</p>
<p>ç®€å•ä»£ç å®ç°  <code>document.querySelector('html').scrollIntoView()</code></p>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>æœ¬æ–‡åªæ˜¯ç®€å•ä»‹ç»äº†ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³è¦è¯¦ç»†äº†è§£çš„è¯ï¼Œå¯ä»¥å‚è€ƒå¼ é‘«æ—­çš„è¿™ç¯‡æ–‡ç« ï¼š<a target="_blank" href="https://www.zhangxinxu.com/wordpress/2018/10/scroll-behavior-scrollintoview-%E5%B9%B3%E6%BB%91%E6%BB%9A%E5%8A%A8/">CSS scroll-behavior å’Œ JS scrollIntoView è®©é¡µé¢æ»šåŠ¨å¹³æ»‘</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mac ä¸‹ nvm çš„å®‰è£…å’Œä½¿ç”¨]]></title>
        <id>https://nwc7cp.coding-pages.com/post/mac-xia-nvm-de-an-zhuang-he-shi-yong/</id>
        <link href="https://nwc7cp.coding-pages.com/post/mac-xia-nvm-de-an-zhuang-he-shi-yong/">
        </link>
        <updated>2019-12-18T02:48:28.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>åœ¨å¼€å‘ä¸­å¯èƒ½åŒæ—¶è¿›è¡Œå¤šä¸ªé¡¹ç›®ï¼Œè€Œä¸åŒçš„é¡¹ç›®æ‰€ä½¿ç”¨çš„ node ç‰ˆæœ¬åˆä¸ä¸€æ ·ï¼Œä¼šå¯¼è‡´å¯¹ç°æœ‰é¡¹ç›®çš„ä¸€äº›ä¾èµ–é€ æˆç¯å¢ƒä¸å…¼å®¹ç­‰é—®é¢˜ã€‚æˆ–è€…è¦ç”¨æœ€æ–°çš„ node ç‰ˆæœ¬è¿›è¡Œå­¦ä¹ ã€‚æ‰€ä»¥å°±éœ€è¦ä½¿ç”¨ <a href="https://github.com/nvm-sh/nvm">nvm</a> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯¹å¤šä¸ª node ç‰ˆæœ¬è¿›è¡Œç®¡ç†å’Œåˆ‡æ¢ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>é¦–å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥å½“å‰ç”¨æˆ·çš„homeç›®å½•ä¸­</p>
<pre><code class="language-shell">cd ~
</code></pre>
<p>ä½¿ç”¨ <code>ls -a</code> æŸ¥çœ‹æœ‰æ²¡æœ‰ <code>.bash_profile</code> è¿™ä¸ªæ–‡ä»¶</p>
<pre><code class="language-shell">ls -a
</code></pre>
<p>æ²¡æœ‰åˆ™æ–°å»ºä¸€ä¸ª</p>
<pre><code class="language-shell">touch ~/.bash_profile
</code></pre>
<p>é€šè¿‡å®˜æ–¹çš„è¯´æ˜åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢å‘½ä»¤ä¸­çš„ä¸€ç§è¿›è¡Œå®‰è£…</p>
<pre><code class="language-shell">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
</code></pre>
<pre><code class="language-shell">wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ <a href="https://brew.sh/">Homebrew</a> å®‰è£… nvmï¼ŒHomebrew æ˜¯ Mac OS å¹³å°ä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚</p>
<p>Homebrew å®‰è£…å®Œåï¼Œæ‰§è¡Œå‘½ä»¤</p>
<pre><code class="language-shell">brew install nvm 
</code></pre>
<h2 id="éªŒè¯å®‰è£…æˆåŠŸ">éªŒè¯å®‰è£…æˆåŠŸ</h2>
<p>é‡å¯ç»ˆç«¯ï¼Œæ‰§è¡Œ <code>nvm -v</code> å‘½ä»¤</p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1576726689482.jpeg" alt="" loading="lazy"></figure>
<h2 id="å¸¸ç”¨çš„-nvm-å‘½ä»¤">å¸¸ç”¨çš„ nvm å‘½ä»¤</h2>
<p><code>nvm ls-remote</code> åˆ—å‡ºæ‰€æœ‰å¯å®‰è£…çš„ç‰ˆæœ¬</p>
<p><code>nvm install &lt;version&gt;</code> å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¦‚ nvm install v8.12.0</p>
<p><code>nvm uninstall &lt;version&gt;</code> å¸è½½æŒ‡å®šçš„ç‰ˆæœ¬</p>
<p><code>nvm ls</code> åˆ—å‡ºæ‰€æœ‰å·²ç»å®‰è£…çš„ç‰ˆæœ¬</p>
<p><code>nvm use &lt;version&gt;</code> åˆ‡æ¢ä½¿ç”¨æŒ‡å®šçš„ç‰ˆæœ¬</p>
<p><code>nvm current</code> æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬</p>
<p><code>nvm alias default &lt;version&gt;</code> è®¾ç½®é»˜è®¤nodeç‰ˆæœ¬</p>
<h2 id="ç®€å•ä½¿ç”¨">ç®€å•ä½¿ç”¨</h2>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œ <code>node -v</code> ã€ <code>nvm ls</code>ï¼ŒæŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ node ç‰ˆæœ¬ã€‚ä¾‹å¦‚æˆ‘çš„ç¯å¢ƒä¸­æŒ‡å‘ <code>system</code> ä¹Ÿå°±æ˜¯ <code>v12.11.1</code>ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://nwc7cp.coding-pages.com/post-images/1584193730067.jpeg" alt="" loading="lazy"></figure>
<p>æ‰§è¡Œ <code>nvm use vx.x.x</code>ï¼Œå³å¯å¯¹å½“å‰å¼€å‘ç¯å¢ƒä¸­ node ç‰ˆæœ¬è¿›è¡Œåˆ‡æ¢ã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://nwc7cp.coding-pages.com/post-images/1584194043884.jpeg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å‡½æ•°çš„é˜²æŠ–å’ŒèŠ‚æµ]]></title>
        <id>https://nwc7cp.coding-pages.com/post/han-shu-de-fang-dou-he-jie-liu/</id>
        <link href="https://nwc7cp.coding-pages.com/post/han-shu-de-fang-dou-he-jie-liu/">
        </link>
        <updated>2019-11-28T03:01:12.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å‡½æ•°çš„é˜²æŠ–ä¸èŠ‚æµåœ¨é¡¹ç›®ä¸­æœ‰å¾ˆå¤šçš„ä½¿ç”¨åœºæ™¯ï¼Œæœ¬æ–‡å‚è€ƒäº†å†´ç¾½çš„ä¸¤ç¯‡æ–‡ç« ã€‚</p>
<h2 id="å‡½æ•°é˜²æŠ–">å‡½æ•°é˜²æŠ–</h2>
<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>
<p>æŒ‡è§¦å‘äº‹ä»¶åï¼Œåœ¨ n ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè§¦å‘äº‹ä»¶ååœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°å»¶æ‰§è¡Œæ—¶é—´ã€‚</p>
<blockquote>
<p>ä¸¾ä¸ªæ —å­ï¼Œåç”µæ¢¯çš„æ—¶å€™ï¼Œå¦‚æœç”µæ¢¯æ£€æµ‹åˆ°æœ‰äººè¿›æ¥ï¼ˆè§¦å‘äº‹ä»¶ï¼‰ï¼Œå°±ä¼šå¤šç­‰å¾… 10 ç§’ï¼Œæ­¤æ—¶å¦‚æœåˆæœ‰äººè¿›æ¥ï¼ˆ10ç§’ä¹‹å†…é‡å¤è§¦å‘äº‹ä»¶ï¼‰ï¼Œé‚£ä¹ˆç”µæ¢¯å°±ä¼šå†å¤šç­‰å¾… 10 ç§’ã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œç”µæ¢¯åœ¨æ£€æµ‹åˆ°æœ‰äººè¿›å…¥ 10 ç§’é’Ÿä¹‹åï¼Œæ‰ä¼šå…³é—­ç”µæ¢¯é—¨å¼€å§‹è¿è¡Œï¼Œå› æ­¤â€œå‡½æ•°é˜²æŠ–â€çš„å…³é”®åœ¨äºï¼Œåœ¨ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿä¸€å®šæ—¶é—´ä¹‹åï¼Œæ‰æ‰§è¡Œç‰¹å®šåŠ¨ä½œã€‚</p>
</blockquote>
<p>åœºæ™¯ä»£ç  html</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh-cmn-Hans&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;IE=edge, chrome=1&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
  &lt;style&gt;
    #container {
      width: 100%;
      height: 200px;
      line-height: 200px;
      text-align: center;
      color: #fff;
      background-color: #444;
      font-size: 30px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&quot;container&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
        var count = 1;
        var container = document.getElementById('container');

        function getUserAction() {
        container.innerHTML = count++;
        };

        container.onmousemove = debounce(getUserAction, 1000);

        function debounce () {
            ...
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="åŸºç¡€ç‰ˆ">åŸºç¡€ç‰ˆ</h3>
<p>æ ¹æ®ä¸Šé¢çš„è¡¨è¿°ï¼Œå®ç°ç¬¬ä¸€ç‰ˆçš„ä»£ç ï¼š</p>
<pre><code class="language-js">function debounce(func, wait) {
    var timeout;

    return function () {
        var context = this;
        var args = arguments;

        clearTimeout(timeout)
        timeout = setTimeout(function(){
            func.apply(context, args)
        }, wait);
    }
}
</code></pre>
<p>ç¬¬ä¸€ç‰ˆçš„ä»£ç æ²¡ä»€ä¹ˆéš¾ç‚¹ã€‚ä¸€ä¸ªäº‹ä»¶åœ¨ n ç§’å†…é‡å¤è§¦å‘ï¼Œä¼šä¸€ç›´æ¸…é™¤å®šæ—¶å™¨ï¼Œç­‰åœæ­¢è§¦å‘ n ç§’åå®šæ—¶å™¨çš„æ–¹æ³•æ‰ä¼šæ‰§è¡Œã€‚åŒæ—¶ä¹Ÿè§£å†³äº†å®šæ—¶å™¨ä¸­æ–¹æ³•çš„ this æŒ‡å‘å’Œ JavaScript åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä¼šæä¾›äº‹ä»¶å¯¹è±¡ event å‚æ•°é—®é¢˜ã€‚</p>
<h3 id="ç«‹åˆ»æ‰§è¡Œ">ç«‹åˆ»æ‰§è¡Œ</h3>
<p>ç¬¬ä¸€ç‰ˆä»£ç äº‹ä»¶éœ€è¦åœ¨ n ç§’åæ‰§è¡Œã€‚ä¸€ä¸ªæ–°çš„éœ€æ±‚æ˜¯å¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œç„¶åç­‰åˆ°åœæ­¢è§¦å‘ n ç§’åï¼Œå†é‡æ–°è§¦å‘æ‰§è¡Œã€‚</p>
<p>å¢åŠ  immediate å‚æ•°åˆ¤æ–­æ˜¯å¦æ˜¯ç«‹åˆ»æ‰§è¡Œã€‚</p>
<pre><code class="language-js">function debounce(func, wait, immediate) {
    var timeout;

    return function () {
        var context = this;
        var args = arguments;

        if (timeout) clearTimeout(timeout);

        if (immediate) {
            var callNow = !timeout;
            timeout = setTimeout(function () {
                timeout = null
            }, wait);
            
            if (callNow) func.apply(this, args) 
        } else {
            timeout = setTimeout(function () {
                func.apply(context, args)
            }, wait);
        }
    }
}
</code></pre>
<h3 id="è¿”å›å€¼">è¿”å›å€¼</h3>
<p>getUserAction å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿéœ€è¦è¿”å›å‡½æ•°çš„ç»“æœã€‚ä½†å½“ immediate ä¸º false çš„æ—¶å€™ï¼Œå› ä¸ºä½¿ç”¨ setTimeoutï¼Œåœ¨æœ€å return çš„æ—¶å€™å€¼ä¼šä¸€ç›´æ˜¯ undefinedã€‚æ‰€ä»¥åªåœ¨ immediate ä¸º true çš„æ—¶å€™è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚</p>
<pre><code class="language-js">function debounce(func, wait, immediate) {
    var timeout, result;

    return function () {
        var context = this;
        var args = arguments;

        if (timeout) clearTimeout(timeout);

        if (immediate) {
            var callNow = !timeout;
            timeout = setTimeout(function () {
                timeout = null
            }, wait);
            
            if (callNow) result = func.apply(this, args) 
        } else {
            timeout = setTimeout(function () {
                func.apply(context, args)
            }, wait);
        }
        return result
    }
}
</code></pre>
<h3 id="å–æ¶ˆ">å–æ¶ˆ</h3>
<p>å®ç°è®©ç”¨æˆ·æ‰§è¡Œ cancel æ–¹æ³•æ¥å–æ¶ˆé˜²æŠ–ï¼Œå½“ç”¨æˆ·å†æ¬¡å»è§¦å‘æ—¶åˆå¯ä»¥ç«‹åˆ»æ‰§è¡Œã€‚</p>
<pre><code class="language-js">function debounce(func, wait, immediate) {
    var timeout, result;

    var debounced = function () {
        var context = this;
        var args = arguments;

        if (timeout) clearTimeout(timeout);

        if (immediate) {
            var callNow = !timeout;
            timeout = setTimeout(function () {
                timeout = null
            }, wait);
            
            if (callNow) result = func.apply(this, args) 
        } else {
            timeout = setTimeout(function () {
                func.apply(context, args)
            }, wait);
        }
        return result
    }

    debounced.cancel = function() {
        clearTimeout(timeout);
        timeout = null;
    };

    return debounced
}
</code></pre>
<h2 id="å‡½æ•°èŠ‚æµ">å‡½æ•°èŠ‚æµ</h2>
<p>æ¦‚å¿µï¼šé™åˆ¶ä¸€ä¸ªå‡½æ•°åœ¨ä¸€å®šæ—¶é—´å†…åªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<blockquote>
<p>ä¸¾ä¸ªæ —å­ï¼Œåç«è½¦æˆ–åœ°é“ï¼Œè¿‡å®‰æ£€çš„æ—¶å€™ï¼Œåœ¨ä¸€å®šæ—¶é—´ï¼ˆä¾‹å¦‚10ç§’ï¼‰å†…ï¼Œåªå…è®¸ä¸€ä¸ªä¹˜å®¢é€šè¿‡å®‰æ£€å…¥å£ï¼Œä»¥é…åˆå®‰æ£€äººå‘˜å®Œæˆå®‰æ£€å·¥ä½œã€‚ä¸Šä¾‹ä¸­ï¼Œæ¯10ç§’å†…ï¼Œä»…å…è®¸ä¸€ä½ä¹˜å®¢é€šè¿‡ã€‚åˆ†æå¯çŸ¥â€œå‡½æ•°èŠ‚æµâ€çš„è¦ç‚¹åœ¨äºï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹å†…ï¼Œé™åˆ¶ä¸€ä¸ªåŠ¨ä½œåªæ‰§è¡Œä¸€æ¬¡ ã€‚</p>
</blockquote>
<pre><code class="language-js">// func (Function): è¦èŠ‚æµçš„å‡½æ•°
// [wait=0] (number): éœ€è¦èŠ‚æµçš„æ¯«ç§’
// [options={}] (Object): é€‰é¡¹å¯¹è±¡
// [options.leading=true] (boolean): æŒ‡å®šè°ƒç”¨åœ¨èŠ‚æµå¼€å§‹å‰
// [options.trailing=true] (boolean): æŒ‡å®šè°ƒç”¨åœ¨èŠ‚æµç»“æŸå
function throttle(func, wait, options) {
    var timeout, context, args, result;
    var previous = 0;
    if (!options) options = {};

    var later = function () {
        previous = options.leading === false ? 0 : Date.now();
        timeout = null;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
    };

    var throttled = function () {
        var now = Date.now();
        if (!previous &amp;&amp; options.leading === false) previous = now;

        var remaining = wait - (now - previous);
        context = this;
        args = arguments;

        if (remaining &lt;= 0 || remaining &gt; wait) {
            if (timeout) {
                clearTimeout(timeout);
                timeout = null;
            }
            previous = now;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
        } else if (!timeout &amp;&amp; options.trailing !== false) {
            timeout = setTimeout(later, remaining);
        }
        return result;
    };

    throttled.cancel = function () {
        clearTimeout(timeout);
        previous = 0;
        timeout = context = args = null;
    };

    return throttled;
}
</code></pre>
<h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2>
<ul>
<li><a href="https://github.com/mqyqingfeng/Blog/issues/22" target="_blank">JavaScript ä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦é˜²æŠ–</a></li>
<li><a href="https://github.com/mqyqingfeng/Blog/issues/26" target="_blank">JavaScript ä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦èŠ‚æµ</a></li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CSSå¼€å‘æŠ€å·§æ•´ç†]]></title>
        <id>https://nwc7cp.coding-pages.com/post/5dc8a231f268da4d40712f8a/</id>
        <link href="https://nwc7cp.coding-pages.com/post/5dc8a231f268da4d40712f8a/">
        </link>
        <updated>2019-11-11T13:15:39.000Z</updated>
        <content type="html"><![CDATA[<h3 id="å¿«é€Ÿé‡ç½®è¡¨å•å…ƒç´ ">å¿«é€Ÿé‡ç½®è¡¨å•å…ƒç´ </h3>
<p>åŸå§‹çš„ <code>button</code> æŒ‰é’®é‡ç½®</p>
<pre><code class="language-css">button {
  background: none;
  border: none;
  color: inherit;
  font: inherit;
  outline: none;
  padding: 0;
}
</code></pre>
<p>åªéœ€è¦è¿™æ ·å°±å¯ä»¥(<code>input</code>ã€<code>textarea</code>)</p>
<pre><code class="language-css">button { 
  all: unset;
}
</code></pre>
<h3 id="æ–‡æœ¬çœç•¥å·æ˜¾ç¤º">æ–‡æœ¬çœç•¥å·æ˜¾ç¤º</h3>
<p>æ–‡æœ¬çœç•¥å·æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œè€Œçœç•¥å·å±•ç¤ºåˆé€šå¸¸åˆ†ä¸ºä¿©ç§æƒ…å†µæŠ˜è¡Œå’Œä¸æŠ˜è¡Œã€‚</p>
<p>ä¸æŠ˜è¡Œï¼š</p>
<pre><code class="language-css">div {  
  white-space: nowrap; /* è§„å®šæ–‡æœ¬æ˜¯å¦æŠ˜è¡Œ */  
  overflow: hidden; /* è§„å®šè¶…å‡ºå†…å®¹å®½åº¦çš„å…ƒç´ éšè— */
  text-overflow: ellipsis; /* è§„å®šè¶…å‡ºçš„å†…å®¹æ–‡æœ¬çœç•¥å·æ˜¾ç¤ºï¼Œé€šå¸¸è·Ÿä¸Šé¢çš„å±æ€§è¿ç”¨ï¼Œå› ä¸ºæ²¡æœ‰ä¸Šé¢çš„å±æ€§ä¸ä¼šè§¦å‘è¶…å‡ºè§„å®šçš„å†…å®¹ */
}
</code></pre>
<p>æŠ˜è¡Œ(èƒ½ä¸»åŠ¨æ§åˆ¶è¡Œæ•°,è¿™é‡Œè®¾ç½®çš„è¶…å‡º 4 è¡Œæ˜¾ç¤ºçœç•¥å·)ï¼š</p>
<pre><code class="language-css">div {      
  overflow: hidden;      
  text-overflow: ellipsis;      
  display: -webkit-box; /* å°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º */      
  -webkit-line-clamp: 4; /* æ§åˆ¶æœ€å¤šæ˜¾ç¤ºå‡ è¡Œ */      
  -webkit-box-orient: vertical; /* è®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ */    
}
</code></pre>
<h3 id="è®¾ç½®æ–‡æœ¬ä¸¤ç«¯å¯¹é½">è®¾ç½®æ–‡æœ¬ä¸¤ç«¯å¯¹é½</h3>
<pre><code class="language-css">p {
  text-align-last: justify; /* è¿™æ˜¯å…³é”®å±æ€§ */
}
</code></pre>
<h3 id="è§„å®šå›¾åƒå±•ç¤ºæ–¹å¼">è§„å®šå›¾åƒå±•ç¤ºæ–¹å¼</h3>
<p>æ˜¾ç¤ºå›¾ç‰‡çš„æ—¶å€™ä¼šé‡åˆ°è¿™ç§é—®é¢˜ï¼Œå¯¹é¢è¿”å›çš„å›¾ç‰‡å®½é«˜æ¯”ä¾‹æ˜¯ä¸ä¸€æ ·çš„ã€‚ä½†æ˜¯è®¾ç½®çš„å®¹å™¨å¤§å°æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è®©å›¾ç‰‡ä¿æŒæ¯”ä¾‹æœ€å¤§å¡«å……å®¹å™¨ã€‚</p>
<pre><code>object-fitï¼š cover | contain | fill | scale-down | none
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1573479048374.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[React Native çŸ¥è¯†ç‚¹å°è®°]]></title>
        <id>https://nwc7cp.coding-pages.com/post/react-native/</id>
        <link href="https://nwc7cp.coding-pages.com/post/react-native/">
        </link>
        <updated>2019-04-08T12:29:48.000Z</updated>
        <summary type="html"><![CDATA[<p>æ­¤ç¯‡æ–‡ç« ç”¨äºè®°å½•å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å’ŒçŸ¥è¯†ç‚¹...</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ­¤ç¯‡æ–‡ç« ç”¨äºè®°å½•å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å’ŒçŸ¥è¯†ç‚¹...</p>
<!-- more -->
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å…¬å¸æ‰“ç®—å¼€å‘ä¸€ä¸ªAppé¡¹ç›®ã€‚ç”±äºæ²¡æœ‰åŸç”Ÿå¼€å‘äººå‘˜ï¼Œç»„é‡Œéƒ½æ˜¯çº¯å‰ç«¯å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥æŠ€æœ¯é€‰å‹æ—¶é‡‡ç”¨ç›¸å¯¹æˆç†Ÿçš„ <code>react-native</code> æ¥å¼€å‘ã€‚ä¸å¾—ä¸è¯´ <code>react-native</code> ç¡®å®å¾ˆä¼˜ç§€ï¼Œè®©å‰ç«¯å¼€å‘äººå‘˜èƒ½å¤Ÿè¿…é€Ÿæ­èµ·ä¸€ä¸ªåº”ç”¨è¿è¡Œã€‚ä½†å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œå¯¹å‰ç«¯å¼€å‘æ¥è¯´ä¹Ÿæ˜¯ä¸€ä¸ªä¸å°çš„æŒ‘æˆ˜ã€‚</p>
<h2 id="å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</h2>
<p>åªè¦ä¸¥æ ¼æŒ‰ç…§ <a href="https://reactnative.cn/docs/getting-started/">React Native</a> å®˜æ–¹æ–‡æ¡£æ­å»ºå³å¯ï¼Œå½“æ—¶é¡¹ç›®ä½¿ç”¨ <code>react-native</code> 0.57 ç‰ˆæœ¬åŸºç¡€åº“ã€‚</p>
<h2 id="åº”ç”¨è®¾ç½®">åº”ç”¨è®¾ç½®</h2>
<p>åº”ç”¨åç§°ã€å›¾æ ‡ã€å¯åŠ¨å±ç›¸å…³è®¾ç½®</p>
<h3 id="ä¿®æ”¹åº”ç”¨åç§°">ä¿®æ”¹åº”ç”¨åç§°</h3>
<ul>
<li>iOS</li>
</ul>
<p>ç¼–è¾‘ <code>ios/é¡¹ç›®åç§°/Info.plist</code> æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;key&gt;CFBundleDisplayName&lt;/key&gt;
- &lt;string&gt;$(PRODUCT_NAME)&lt;/string&gt;
+ &lt;string&gt;åº”ç”¨åç§°&lt;/string&gt;
</code></pre>
<ul>
<li>android</li>
</ul>
<p>ç¼–è¾‘ <code>android/app/src/main/res/values/strings.xml</code> æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;resources&gt;
- &lt;string name=&quot;app_name&quot;&gt;default&lt;/string&gt;
+ &lt;string name=&quot;app_name&quot;&gt;åº”ç”¨åç§°&lt;/string&gt;   
&lt;/resources&gt;
</code></pre>
<h3 id="ä¿®æ”¹å›¾æ ‡">ä¿®æ”¹å›¾æ ‡</h3>
<p>åº”ç”¨å›¾æ ‡å¯¹å°ºå¯¸æœ‰è¦æ±‚ã€‚æ¯”è¾ƒç®€å•åœ°æ–¹å¼æ˜¯å‡†å¤‡ä¸€å¼  <code>1024*1024</code> çš„å›¾ç‰‡ï¼Œç„¶åä½¿ç”¨ <a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a> åœ¨çº¿ç”Ÿæˆã€‚</p>
<p>ç”Ÿæˆæ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://nwc7cp.coding-pages.com/post-images/1573218973706.jpg" alt="" loading="lazy"></figure>
<ul>
<li>iOS</li>
</ul>
<p>æ›¿æ¢ <code>ios/é¡¹ç›®åç§°/Images.xcassets/AppIcon.appiconset</code> ä¸­çš„å†…å®¹ã€‚å¦‚æœä¸éœ€è¦å…¨éƒ¨å°ºå¯¸å¯ä»¥ç”¨ <code>XCode</code> æ‰“å¼€é¡¹ç›® <code>Images.xcassets</code> &gt; <code>AppIcon</code> æ‹–å…¥ç›¸åº”å°ºå¯¸çš„å›¾æ ‡ã€‚</p>
<ul>
<li>android</li>
</ul>
<p>æ›¿æ¢ <code>android/app/src/main/res</code> ä¸‹å¯¹åº”çš„å›¾æ ‡ã€‚</p>
<h3 id="æ·»åŠ å¯åŠ¨é¡µ">æ·»åŠ å¯åŠ¨é¡µ</h3>
<p>åº”ç”¨æ‰“å¼€æ—¶ä¼šæœ‰çŸ­æš‚çš„ç™½å±ï¼Œä¸ºè§£å†³è¿™ä¸€é—®é¢˜é¡¹ç›®ä¸­ä½¿ç”¨ <a href="https://github.com/crazycodeboy/react-native-splash-screen">react-native-splash-screen</a> åº“ã€‚æ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ã€‚</p>
<p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/launch-screen/">Launch Screenè‹¹æœå®˜æ–¹åˆ†è¾¨ç‡å¤§å…¨</a></p>
<h2 id="åŠŸèƒ½ç»„ä»¶">åŠŸèƒ½ç»„ä»¶</h2>
<h3 id="icon-ç»„ä»¶">Icon ç»„ä»¶</h3>
<p>å…³äº <code>svg</code> æ–‡ä»¶çš„ä¼˜ç‚¹å°±ä¸å¿…å¤šè¯´äº†ã€‚è¦æƒ³åœ¨åº”ç”¨ä¸­ä½¿ç”¨ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œä¸åƒåœ¨ web ä¸­ç›´æ¥ img æ ‡ç­¾å¼•å…¥å°±å¯ä»¥ç”¨äº†ã€‚æ¯”å¦‚å®‰å“ä¸æ”¯æŒ svg é™æ€æ–‡ä»¶çš„ require ğŸ˜‚ã€‚ä¹Ÿä¸ºäº†é¿å…æ¯æ¬¡æ‰“å¼€åº”ç”¨è¯·æ±‚å¤šä¸ª svg æµªè´¹èµ„æºã€‚</p>
<p>æ‰€ä»¥å¯ä»¥å°†å¤šä¸ª svg æ–‡ä»¶é€šè¿‡è„šæœ¬è½¬æ¢æˆä¸€ä¸ª js å¯¹è±¡æˆ–è€…ä¸€ä¸ª json æ–‡ä»¶ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">export default {
  &quot;arrow-left&quot;: &quot;&lt;svg&gt;...&lt;/svg&gt;&quot;
}
</code></pre>
<p>ä¸Šé¢çš„è½¬æ¢è„šæœ¬å¯ä»¥å‚è€ƒ <a href="https://github.com/HuJiaoHJ/svg2json">svg2json</a></p>
<p>å®‰è£…</p>
<pre><code class="language-shell">npm install react-native-svg2json --save-dev
</code></pre>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•è¾“å…¥å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="language-shell">// svg2json -i ${inDir} -o ${outFile}
./node_modules/.bin/svg2json -i ./src/assets/svgs -o ./src/assets/svgs.js
</code></pre>
<p>æˆ–è€…å†™å…¥ <code>package.json</code> scripts ä¸­ï¼Œç›´æ¥è¿è¡Œ <code>npm run svg2json</code></p>
<pre><code class="language-js">&quot;scripts&quot;: {
    &quot;start&quot;: &quot;node node_modules/react-native/local-cli/cli.js start&quot;,
    &quot;test&quot;: &quot;jest&quot;,
    &quot;svg2json&quot;: &quot;node node_modules/.bin/svg2json -i ./src/assets/svgs -o ./src/assets/svgs.js&quot;
}
</code></pre>
<p>ä¹‹åå¦‚ä½•ä½¿ç”¨ï¼Œå°±éœ€è¦ <a href="https://github.com/vault-development/react-native-svg-uri">react-native-svg-uri</a> åº“ï¼Œæ”¯æŒä¼ å…¥ svg å­—ç¬¦ä¸²æ¥æ¸²æŸ“ svgã€‚ä½†è¿˜éœ€åšå¥½ç»„ä»¶å°è£…ã€‚</p>
<pre><code class="language-js">import React, { Component } from 'react';
import SvgUri from 'react-native-svg-uri';
import svgs from '@/assets/svgs.js'; // ç”Ÿæˆçš„ svg å­—ç¬¦ä¸²å¯¹è±¡
export default class Icon extends Component {
  render() {
    const { name, color, size, style } = this.props;
    let svgXmlData = svgs[name]
    if (!svgXmlData) {
      let err_msg = `æ²¡æœ‰&quot;${name}&quot;è¿™ä¸ªiconæ–‡ä»¶`;
      throw new Error(err_msg);
    }
    return (
      &lt;SvgUri width={size} height={size} svgXmlData={svgXmlData} fill={color} style={style} /&gt;
    )
  }
}
</code></pre>
<p>ä½¿ç”¨</p>
<pre><code class="language-js">&lt;Icon name=&quot;ac_unit&quot; size=&quot;40&quot; color=&quot;#ccc&quot;/&gt;
</code></pre>
<h2 id="è·¯å¾„åˆ«å">è·¯å¾„åˆ«å</h2>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­é€šå¸¸ä½¿ç”¨ <code>../../../</code> çš„æ–¹å¼å¼•å…¥ç»„ä»¶ï¼Œè¿™ç§æ–¹å¼è·¯å¾„è¿‡æ·±ä¸”ä¸å¤Ÿä¼˜é›…ã€‚</p>
<p>æ’ä»¶å®‰è£…</p>
<pre><code class="language-shell">npm install babel-plugin-root-import --save-dev
æˆ–è€…
yarn add babel-plugin-root-import --dev
</code></pre>
<p>åœ¨ <code>babel</code> é…ç½®æ–‡ä»¶ <code>.babelrc</code> æˆ–è€… <code>babel.config.js</code> ä¸­</p>
<pre><code class="language-js">{
  &quot;plugins&quot;: [
    [&quot;babel-plugin-root-import&quot;, {
      &quot;rootPathPrefix&quot;: &quot;~&quot;,
      &quot;rootPathSuffix&quot;: &quot;src&quot;
    }]
  ]
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š å½“ rootPathPrefix è®¾ç½®ä¸º @ å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä»¥ @ å¼€å¤´çš„ npm åŒ…å¼•å…¥é”™è¯¯ï¼Œå¦‚ <code>@ant-design/react-native</code></p>
</blockquote>
<p>ä¹‹åä½¿ç”¨</p>
<pre><code class="language-js">import foo from '~/foo';
const bar = require('~/bar');
</code></pre>
<h2 id="æ‰“åŒ…å’Œå‘å¸ƒ">æ‰“åŒ…å’Œå‘å¸ƒ</h2>
<p>åº”ç”¨å¼€å‘å®Œå°±è¯¥è€ƒè™‘ä¸Šæ¶äº†ğŸ˜˜ï¼Œç”±äºæ²¡æœ‰ç»éªŒä¸Šç½‘æŸ¥è¯¢äº†å¾ˆå¤šèµ„æ–™ã€‚</p>
<p>é“¾æ¥ï¼š<a href="https://my.oschina.net/KJhulinhua/blog/1585628">react native iosæ‰“åŒ…æµç¨‹</a>ã€<a href="https://www.pgyer.com/doc/view/build_ipa">æ‰“åŒ…iOSçš„ipaæ–‡ä»¶</a>ã€<a href="https://www.jianshu.com/p/431ed0536754">iOSç”Ÿæˆè¯ä¹¦ æè¿°æ–‡ä»¶ æ‰“åŒ…ä¸Šæ¶Appstoreè¯¦ç»†æµç¨‹</a></p>
<h2 id="å…¶ä»–é—®é¢˜">å…¶ä»–é—®é¢˜</h2>
<p>android å›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œå›¾ç‰‡åç§°ä¸èƒ½æ˜¯ä¸­æ–‡ï¼ˆå¼€å‘æ—¶ç¢°åˆ°è¿™ä¸ªé—®é¢˜ğŸ˜“ï¼‰ã€‚</p>
<h2 id="å…¶ä»–çŸ¥è¯†èµ„æº">å…¶ä»–çŸ¥è¯†èµ„æº</h2>
<p><a href="https://juejin.im/post/5c5402f8f265da2dbd7fd084">https://juejin.im/post/5c5402f8f265da2dbd7fd084</a></p>
]]></content>
    </entry>
</feed>